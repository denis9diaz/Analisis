<div
  class="flex flex-wrap justify-center gap-8 mt-20 sm:flex-row sm:gap-10 lg:gap-20"
>
  <div
    class="e-card animate-fadeInUp delay-0 relative w-[240px] h-[330px] rounded-2xl overflow-hidden shadow-[0_8px_28px_-9px_rgba(0,0,0,0.45)]"
  >
    <!-- Ondas -->
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-0 -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-wave"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_50s_linear_infinite]"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_45s_linear_infinite]"
    >
    </div>

    <!-- Mensual -->
    <div
      class="relative z-10 w-full h-full flex flex-col items-center justify-center text-white px-4 text-center"
    >
      <p class="text-lg font-semibold min-h-[40px]">Plan mensual</p>
      <p class="text-2xl font-bold text-[#9CF5BB] min-h-[36px]">
        9,90€<span class="text-sm font-normal">/mes</span>
      </p>
      <ul class="flex flex-col gap-2 text-sm min-h-[64px] mt-2 mb-2">
        <li
          class="flex items-center justify-center gap-1 text-[#77F0A4] font-medium"
        >
          ✔ <span class="text-white">Acceso a todos los servicios</span>
        </li>
      </ul>
      <button
      data-plan="mensual"
      class="boton-contratar cursor-pointer inline-block mt-4 px-6 py-2 text-sm font-semibold rounded-full bg-gradient-to-br from-green-200 via-green-300 to-green-500 text-gray-900 shadow-[0_4px_10px_rgba(0,0,0,0.4)] border border-green-600 transition-all duration-200 ease-in-out relative hover:shadow-[0_6px_20px_rgba(0,0,0,0.5)] hover:from-green-400 hover:to-green-700 active:translate-y-1"
    >
      Contratar
    </button>
    </div>
  </div>

  <div
    class="e-card animate-fadeInUp delay-1 relative w-[240px] h-[330px] rounded-2xl overflow-hidden shadow-[0_8px_28px_-9px_rgba(0,0,0,0.45)]"
  >
    <!-- Ondas -->
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-0 -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-wave"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_50s_linear_infinite]"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_45s_linear_infinite]"
    >
    </div>

    <!-- Trimestral -->
    <div
      class="relative z-10 w-full h-full flex flex-col items-center justify-center text-white px-4 text-center"
    >
      <p class="text-lg font-semibold min-h-[40px]">Plan 3 meses</p>
      <p class="text-2xl font-bold text-[#9CF5BB] min-h-[36px]">
        24,90€<span class="text-sm font-normal">/3 meses</span>
      </p>
      <ul class="flex flex-col gap-2 text-sm min-h-[64px] mt-2 mb-2">
        <li
          class="flex items-center justify-center gap-1 text-[#77F0A4] font-medium"
        >
          ✔ <span class="text-white">Ahorras 4,80€</span>
        </li>
        <li
          class="flex items-center justify-center gap-1 text-[#77F0A4] font-medium"
        >
          ✔ <span class="text-white">Acceso a todos los servicios</span>
        </li>
      </ul>
      <button
      data-plan="trimestral"
      class="boton-contratar cursor-pointer inline-block mt-4 px-6 py-2 text-sm font-semibold rounded-full bg-gradient-to-br from-green-200 via-green-300 to-green-500 text-gray-900 shadow-[0_4px_10px_rgba(0,0,0,0.4)] border border-green-600 transition-all duration-200 ease-in-out relative hover:shadow-[0_6px_20px_rgba(0,0,0,0.5)] hover:from-green-400 hover:to-green-700 active:translate-y-1"
    >
      Contratar
    </button>
    
    </div>
  </div>

  <div
    class="e-card animate-fadeInUp delay-2 relative w-[240px] h-[330px] rounded-2xl overflow-hidden shadow-[0_8px_28px_-9px_rgba(0,0,0,0.45)]"
  >
    <!-- Ondas -->
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-0 -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-wave"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_50s_linear_infinite]"
    >
    </div>
    <div
      class="wave absolute w-[540px] h-[700px] opacity-60 left-0 top-[210px] -ml-[50%] -mt-[70%] bg-gradient-to-tr from-[#af40ff] via-[#5b42f3] to-[#00ddeb] rounded-[40%] animate-[wave_45s_linear_infinite]"
    >
    </div>

    <!-- Anual -->
    <div
      class="relative z-10 w-full h-full flex flex-col items-center justify-center text-white px-4 text-center"
    >
      <p class="text-lg font-semibold min-h-[40px]">Plan anual</p>
      <p class="text-2xl font-bold text-[#9CF5BB] min-h-[36px]">
        89,90€<span class="text-sm font-normal">/año</span>
      </p>
      <ul class="flex flex-col gap-2 text-sm min-h-[64px] mt-2 mb-2">
        <li
          class="flex items-center justify-center gap-1 text-[#77F0A4] font-medium"
        >
          ✔ <span class="text-white">Ahorras 28,90€</span>
        </li>
        <li
          class="flex items-center justify-center gap-1 text-[#77F0A4] font-medium"
        >
          ✔ <span class="text-white">Acceso a todos los servicios</span>
        </li>
      </ul>
      <button
      data-plan="anual"
      class="boton-contratar cursor-pointer inline-block mt-4 px-6 py-2 text-sm font-semibold rounded-full bg-gradient-to-br from-green-200 via-green-300 to-green-500 text-gray-900 shadow-[0_4px_10px_rgba(0,0,0,0.4)] border border-green-600 transition-all duration-200 ease-in-out relative hover:shadow-[0_6px_20px_rgba(0,0,0,0.5)] hover:from-green-400 hover:to-green-700 active:translate-y-1"
    >
      Contratar
    </button>
    
    </div>
  </div>
</div>

<script is:inline>
  document.querySelectorAll(".boton-contratar").forEach((btn) => {
    btn.addEventListener("click", () => {
      const plan = btn.getAttribute("data-plan");
      const token = localStorage.getItem("access_token");

      if (token) {
        window.location.href = `/checkout?plan=${plan}`;
      } else {
        window.location.href = `/registro`;
      }
    });
  });
</script>

<style>
  @keyframes wave {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeInUp {
    animation: fadeInUp 0.7s ease-out forwards;
    opacity: 0;
  }

  .delay-0 {
    animation-delay: 0.2s;
  }
  .delay-1 {
    animation-delay: 0.6s;
  }
  .delay-2 {
    animation-delay: 1s;
  }
</style>
